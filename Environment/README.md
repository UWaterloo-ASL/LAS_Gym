# Environment class
This folder contains **Environment** classes. In our design, Environment is actually internal environment. All sensory data will be sent to learning agent from this interface, while all action command generated by learning agent will be sent to actuators through this interface too.

The public interfaces follow the Env class in OpenAi Gym.

Living Architecture System simulated environment with OpenAi Gym APIs

## To run the simulating environment
### Method 1: with GUI (Only for visulizing behavior)
   1. Clone the whole repositry
   2. In V-REP: File -> Open scene -> choose _LAS-Scenes/livingArchitecture_singleVisitor_nondistributed.ttt_ 
   3. Run: `Interaction_LASAgentActorCritic_and_Env.py` to start interaction between LAS and Environment
   4. Run: `Interaction_Visitor_and_Env.py` to start interaction between Visitor and Environment.

Notes:
  
  * You should start with running `Interaction_LASAgentActorCritic_and_Env.py` first, then start running `Interaction_Visitor_and_Env.py`, because Visitor intertacts with Env by a different [temporary port in chiled-script](http://www.coppeliarobotics.com/helpFiles/en/remoteApiServerSide.htm) from defualt port.
  * In this manner, you can visualize the interactions among LAS, Env and Visitor. However, this visualization will slow down interaction dramatically due to vision render. We recommend you only use this method when you examine your agents' behavior. For other cases, please use **Method 2**. 

### Method 2: without any GUI (Recommended)
   1. Clone the whole repositry
   2. Open `Terminal` or `Command Prompt`
   3. Change directory to your vrep.exe. For example: `cd C:\Program Files\V-REP3\V-REP_PRO_EDU\`
   4. start V-REP via the command line: `vrep -h -s C:\LAS_Gym\LAS-Scenes\livingArchitecture_singleVisitor_nondistributed.ttt`

Notes:
  
  * For details on starting V-REP via the command line, please visit [here](http://www.coppeliarobotics.com/helpFiles/en/commandLine.htm).
  * You can also add path of vrep.exe to environment variable. If there is error to load scene, please firmly follow **Method 2**.
  * Compared with **Method 1**, **Method 2** is faster. Therefore, this method is preferred when you training your learning algorithm.



### To create a scene of living architecture environment:
1. Put the LAS_Gym\LAS-Scenes\las_scene_models\LAS_Model folder in your VREP model folder.  For example: C:\Program Files\V-REP3\V-REP_PRO_EDU\models\LAS_Model
2. Open VREP and load LAS_Gym\LAS-Scenes\livingArchitecture_load_model_test.ttt  This file has one copy of all LAS Models inside. This is to make sure that the models added later has correct suffix (#num). 
2. Run load_sculpture.py. This will read coordinates of actuators from output.csv file and set it in the scene.
4. Delete the models without suffix （#num) and save the scene as new scene
